## 概述

### 1、分层

TCP/IP 通常被认为是一个四层协议系统，每一层负责不同的功能：

- 链路层：数据链路层或者网络接口层。通常包括操作系统中的设备驱动程序和计算机中对应的网络接口卡。处理与电缆或其他任何传输媒介的物理接口细节。
- 网络层：互联网层。处理分组在网络中的活动，例如分组的选路。在TCP/IP协议族中，网络层协议包括IP协议（网际协议），ICMP协议（Internet互联网控制报文协议）以及IGMP协议（Internet组管理协议）。
- 运输层：为两台主机上的应用程序提供端到端的通信。在TCP/IP协议族中，有两个互不相同的传输协议：TCP和UDP。TCP提供可靠的数据通信，包括把应用程序交给它的数据分成合适的小块交给下面的网络层，确认接收到的分组，设置发送最后确认分组的超时始终等。UDP只是把数据报的分组从一台主机发送到另一台主机，并不保证到达。
- 应用层：处理特定的应用程序细节。Telnet远程登录、FTP文件传输协议、SMTP简单邮件传送协议、SNMP简单网络管理协议。

![image](https://raw.githubusercontent.com/weikano/NoteResources/master/TCP%26IP/001.png)

### 2、TCP/IP的分层

TCP和UDP都使用IP作为网络层协议。IP协议由于存在冲突丢包、传输错误甚至恶意篡改的情况，所以是不可靠的。TCP使用IP协议，但它却提供一种可靠的传输层服务。UDP不能保证传输的数据报能安全无误的到达最终目的地。

ICMP是IP协议的附属协议。IP层用它来与其他主机或路由器交换错误报文和其他重要信息。

IGMP用来把一个UDP数据报广播到多个主机。

ARP(地址解析协议)和RARP(逆地址解析协议)是某些网络接口使用的特殊协议，用来转换IP层和网络接口层使用的地址。

### 3、互联网的地址

IPV4地址长32bit。

![image](https://raw.githubusercontent.com/weikano/NoteResources/master/TCP%26IP/004.png)

由图可知：

- A类：网络地址最高位为0，地址范围从0.0.0.0到126.0.0.0
- B类：网络地址以10开头，地址范围为(2^7)128.0.0.0到191.255.255.255
- C类：最高位以110开头，地址范围为(2^7+2^6)192.0.0.0到223.255.255.255.
- D类：最高位以1110开头，地址范围为（2^7+2^6+2^5）224.0.0.0到239.255.255.255.
- E类：240.0.0.0到247.255.255.255。

### 4、域名系统

在TCP/IP领域中，域名系统（DNS）是一个分布的数据库，用来提供IP地址和主机名之间的映射关系。

### 5、封装

当应用程序用TCP输送数据时，数据被送入协议栈中，然后逐个通过每一层知道被当作一串比特流送入网络。其中每一层对收到的数据都要增加一些首部信息（有时还要增加尾部信息）。如果所示，TCP传给IP的数据单元称为TCP报文段或TCP segment，IP传给网络层的数据单元称为IP数据报（IP Datagram）。通过以太网传输的比特流称为帧（Frame）。

![image](https://raw.githubusercontent.com/weikano/NoteResources/master/TCP%26IP/002.png)

### 6、分用

当目的主机收到一个以太网数据帧时，数据就从协议栈中由底向上升，同时去掉各层协议加上的报文首部。每层协议盒都要去检验报文首部中的协议标识，以确定接收数据的上层协议。这个过程称为分用（Demultiplexing）。

### 7、客户-服务器模型

服务器为客户提供一些特定的服务：重复型和并发型。重复型在处理客户请求时不能为其他客户机提供服务。

### 8、端口号

TCP和UDP采用16bit的端口号来识别应用程序。服务器一般是通过知名端口来识别的。例如FTP服务器的TCP端口为21，Telnet服务器的TCP端口为23……这些知名端口号由Internet号分配机构管理。

### 9、标准化过程

### 10、RFC（Request For Command）

### 11、应用编程接口（API）

使用TCP/IP协议的应用程序通常使用两种：socket和TLI（运输层接口，Transport Layer Interface）。