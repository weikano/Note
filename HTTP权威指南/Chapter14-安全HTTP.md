### 14.1 数字加密
> 加密算法(cipher)：对文本进行编码，使偷窥者无法识别的算法
>
> 密钥(key)：改变加密行为的数字化参数
>
> 对称密钥加密：编解码使用相同密钥的算法
>
> 不对称密钥加密系统：编解码使用不同密钥的算法
> 
> 公开密钥加密：一种能使百万计算机便捷的发送机密报文的系统
>
> 数字签名：用来验证报文未被篡改的校验和
>
> 数字证书：由一个可信机构验证和签发的识别信息

#### 14.1.1 密码编制的机制与技巧

#### 14.1.2 密码(cipher)

#### 14.1.3 密码机

#### 14.1.4 密钥 

#### 14.1.1 数字密码

### 14.2 对称密钥加密技术
> 对称密钥加密技术中，发送端和接收端需要共享相同的密钥K才能进行通信。流行的对称密钥加密算法包括：DES，Triple-DES，RC2和RC4

#### 14.2.1 密钥长度与枚举攻击

#### 14.2.2 建立共享密钥
> 每个发送者和接收者在互相对话之前，都要有一个共享的保护密钥。如果有N个节点，每个节点都需要和其他所有N-1个节点进行安全对话，总共需要N*N个共享密钥……

### 14.3 公开密钥加密技术
> 公开密钥加密结束没有为每对主机使用单独的编解码密钥，而是使用了两个非对称密钥，分别用来对主机报文进行编解码。编码密钥是公开的，但是解码密钥只有主机才知道

#### 14.3.1 RSA
#### 14.3.2 混合加密系统和会话密钥

### 14.4 数字签名
> 签名是加了密的校验和
> - 签名可以证明是作者编写了这条报文。只有作者才会有最机密的私有密钥。因此只有作者才能计算出校验和。
> - 签名可以防止报文被篡改。如果报文传输过程中，内容进行了修改，那么校验和就不再匹配。

### 14.5 数字证书(certs)
> 包含了由某个受信任组织担保的用户或公司的相关信息

#### 14.5.1 证书的主要内容
> - 对象的名称（人，服务器，组织等）
> - 过期时间
> - 证书发布者（由谁为证书担保）
> - 来自证书发布者的数字签名
> - 对象的公开密钥，以及对象和所用签名算法的描述性信息。
> - 其他扩展信息

#### 14.5.2 X.509 v3证书
> - 版本：通常为3
> - 序列号：证书颁发机构（CA）生成的唯一整数。CA生成的每一个证书都要有一个唯一的序列号。
> - 签名算法ID：签名所使用的加密算法。例如，“用RSA加密的MD2摘要”
> - 证书颁发者：发布并签署这个证书的组织名称，以X.500格式表示
> - 有效期：证书何时有效，包括起始和结束日期
> - 对象名称：证书中描述的实体，对象名称以X.500格式表示
> - 对象的公开密钥信息：公开密钥，密钥使用的算法，以及所有的附加参数
> - 发布者的唯一ID：可选的证书发布者唯一标识符，这样就可以重用相同的发布者名称
> - 对象的唯一ID：可选的证书对象唯一标识符，这样就可以使用相同的对象名称了
> - 扩展
> - 证书颁发机构签名：证书颁发机构用指定的签名算法对上述所有字段进行的数字签名

#### 14.5.3 用证书对服务器进行认证
> 通过HTTPS建立一个安全WEB事务之后，浏览器会自动获取所连接服务器的数字证书。如果没有证书，安全连接就会失败。服务器证书中包含很多字段，其中包括：
>
> - WEB站点的名称和主机名
> - WEB站点的公开密钥
> - 签名颁发机构的名称
> - 来自签名颁发机构的数字签名
>
> 浏览器收到证书时会对签名颁发机构进行检查。如果这个机构是很有权威的公共签名机构，浏览器可能已经知道其公开密钥了（浏览器预装很多签名颁发机构的证书）。如果对颁发签名机构一无所知，浏览器通常会对用户显示一个对话框，看看是否信任这个签名发布者。

### 14.6 HTTPS---细节介绍
#### 14.6.1 HTTPS概述
> HTTPS将报文发送给TCP之前，先将其发送给一个安全层，并对其进行加密。安全层是通过SSL及其替代的TLS协议实现的
#### 14.6.2 HTTPS方案
> 请求一个客户端（比如WEB浏览器）对某WEB资源执行某事务时，他会去检查URL的方案。
>
> - http：打开服务器端口80（默认情况下）的连接，并向其发送老的HTTP命令
> - https：打开服务器端口443（默认情况下），然后与服务器握手，以二进制格式与服务器交换一些SSL安全参数，附上加密的HTTP命令

#### 14.6.3 建立安全运输

#### 14.6.4 SSL握手
> - 交换协议版本号
> - 选择一个两端都支持的cipher
> - 对两端的身份进行认证
> - 生成临时的会话密钥，以便加密信道
![image](https://img-blog.csdn.net/20180308103518987)

#### 14.6.5 服务器证书
#### 14.6.6 站点证书的有效性
> - 日期检测：确保证书未过期
> - 签名颁发者可信度检测：确保CA的合法性
> - 签名检测：使用签名颁发机构的公开密钥对证书的签名进行校验，与证书的校验码进行比较，以查看证书的完整性
> - 站点身份检测：验证证书中的域名与它们对话的服务器的域名是否匹配

#### 14.6.7 虚拟主机与证书

### 14.7 HTTPS客户端实例
#### 14.7.1 OpenSSL
#### 14.7.2 简单的HTTPS客户端

### 14.8 通过代理以渠道形式传输安全流量
> 客户端通常都是使用代理访问web服务器。但只要客户端开始用服务器的公开密钥对发往服务器的数据进行加密，代理就再也不能读取http首部，就无法知道应该将请求转向何处了。
>
> HTTP通过新的名为CONNECT的扩展方法来发送明文形式的端点信息。CONNECT方法会告诉代理，打开一条到所期望主机和端口号的连接，如下
> CONNECT home.netscape.com:443 http/1.0
> User-agent: Mozilla/1.1N
> < raw SSL-encrypted data would follow here>