### 1. 方案雏形
1. 图片分小片传输
> 整张图片放在一个网络包中进行传输，一旦失败就必须重传整个图片，这样浪费流量。而且单个消息越大，传输时越容易失败。
2. 不同类型的网络情况下分片的初始大小不同
> 比如WiFi和移动网络，采取不同的初始分片大小
3. 动态增大分片大小，以减少分片数量
> 分片会带来图片拆分的开销，额外的http头，而且还有分片后多次请求带来的网络延迟RTT。理论上分片越少，开销越小。
4. 确定每个分片是否要继续增大之前，要检查网络类型是否变化。一旦变化就不能继续增大，而应该使用新网络的初始值。
> 网络变化后，带宽、RTT和稳定性都会发生变化。
5. 分片如果传输失败，应该使用该网络下的初始分片大小进行重试
> 传输失败代表网络质量下降了，类似TCP协议中的处理。
6. 每个分片都有一定的失败重传次数，当一个分片的所有重传都失败了，才判定图片传输失败
7. 用户点击重试时，要能够端点续传