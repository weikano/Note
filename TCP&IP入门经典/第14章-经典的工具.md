### 第14章-经典的工具

#### 14.2 协议功能障碍和配置错误

##### 14.2.1 ping

ping提供一系列选项，可以用在拍错网络问题时使用

1. ping环回地址127.0.0.1，检测TCP/IP软件是否工作正常
2. ping本地IP地址，检测网络适配器是否正常以及本地IP地址配置是否正常
3. ping默认网关，检测是否可以和本地子网通信以及默认网关是否在线
4. ping默认网关之外的某个地址，检测该网关能否将数据报转发出本地网段
5. 使用主机名ping本地主机和远程主机，检测DNS是否正常

##### 14.2.2 配置信息工具

```shell
# ifconfig配置信息
# 接口名称即对应网卡名称 netmask为子网掩码
ifconfig [接口名称] [IP地址] netmask [netmask]
# 启用up和禁用down网络接口
ifconfig [接口名称] up/down
```

##### 14.2.3 地址解析协议（ARP）

```shell
# 显示所有ARP缓存
arp -a
# 添加一个永久的静态条目
arp -s [IP] [MAC]
# 删除一个静态条目
arp -d [IP]
```

#### 14.5 网络性能问题

##### 14.5.1 traceroute

traceroute利用ICMP协议定位源头和目的地之间的所有路由器，TTL可以反映数据报经过的路由器或者网关数量。

但是不应该使用traceroute获得的往返时间来精确判断网络性能：ICMP流量的优先级较低，而且会花费大量事件来转发处理更重要的数据报。

##### 14.5.2 route

```shell
# 显示详细信息
route -v
```

##### 14.5.3 netstat

```shell
#按协议显示统计信息
netstat -s
```

